<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic Light</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Apply CSS to make the image full screen */
        body {
            height: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
            position: relative; /* Added for positioning */
        }
       
        #full-screen-image {
            width: 69%;
        }   
        #image-container {
            height: 100%; /* Set to 100% to cover the entire viewport height */
            position: relative; /* Added for positioning */
        }.trafficLight1 {
            background-color: black;
            width: 4%;
            height: 16%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px 5px;
            border-radius: 10px;
            position: absolute;
            bottom: 21%; /* Position at the bottom of the container */
            left: 13%; /* Center horizontally */
           /* Center horizontally */
           transform: translateX(-50%) rotate(90deg);
        }
        .trafficLight1 span {
            width: 52%;
            height: 27%;
            border-radius: 100%;
            background-color: gray;
           
        }
        .trafficLight2 {
            background-color: black;
            width: 4%;
            height: 16%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px 5px;
            border-radius: 10px;
            position: absolute;
            bottom: 21%; /* Position at the bottom of the container */
            left: 23%; /* Center horizontally */
           /* Center horizontally */
           transform: translateX(-50%) rotate(90deg);
        }
        .trafficLight2 span {
            width: 52%;
            height: 27%;
            border-radius: 100%;
            background-color: gray;
            
        }
        .trafficLight3 {
            background-color: black;
            width: 4%;
            height: 16%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px 5px;
            border-radius: 10px;
            position: absolute;
            bottom: 77%; /* Position at the bottom of the container */
            left: 33%; /* Center horizontally */
           /* Center horizontally */
           transform: translateX(-50%) rotate(90deg);
        }
        .trafficLight3 span {
            width: 52%;
            height: 27%;
            border-radius: 100%;
            background-color: gray;
            
        }
        .trafficLight4 {
            background-color: black;
            width: 4%;
            height: 16%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px 5px;
            border-radius: 10px;
            position: absolute;
            bottom: 77%; /* Position at the bottom of the container */
            left: 43%; /* Center horizontally */
           /* Center horizontally */
           transform: translateX(-50%) rotate(90deg);
        }
        .trafficLight4 span {
            width: 52%;
            height: 27%;
            border-radius: 100%;
            background-color: gray;
           
        }
        .trafficLight5 {
            background-color: black;
            width: 4%;
            height: 15%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px 5px;
            border-radius: 10px;
            position: absolute;
            bottom: 21%; /* Position at the bottom of the container */
            left: 47%; /* Center horizontally */
           /* Center horizontally */
           transform: translateX(-50%) rotate(0deg);
        }
        .trafficLight5 span {
            width: 52%;
            height: 27%;
            border-radius: 100%;
            background-color: gray;
           
        }
        .trafficLight6 {
            background-color: black;
            width: 4%;
            height: 14%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px 5px;
            border-radius: 10px;
            position: absolute;
            bottom: 39%; /* Position at the bottom of the container */
            left: 47%; /* Center horizontally */
           /* Center horizontally */
           transform: translateX(-50%) rotate(0deg);
        }
        .trafficLight6 span {
            width: 52%;
            height: 27%;
            border-radius: 100%;
            background-color: gray;
            
        }
        #car1 {
          display: none;
            position: absolute;
            bottom: 1%; /* Adjust the vertical position */
            left: 9%; /* Initial position off the screen */
            /* Animation duration and timing function */
            transform:  rotate(-90deg);
        }
        #car2 {
          display: none;
            position: absolute;
            bottom: 1%; /* Adjust the vertical position */
            left: 19%; /* Initial position off the screen */
            /* Animation duration and timing function */
            transform:  rotate(-90deg);
        }
        #car3 {
          display: none;
            position: absolute;
            top: 1%; /* Adjust the vertical position */
            left: 29%; /* Initial position off the screen */
            /* Animation duration and timing function */
            transform:  rotate(90deg);
        }
        #car4 {
          display: none;
            position: absolute;
            top: 1%; /* Adjust the vertical position */
            left: 39%; /* Initial position off the screen */
            /* Animation duration and timing function */
            transform:  rotate(90deg);
        }
        #car5 {
          display: none;
            position: absolute;
            bottom: 25%; /* Adjust the vertical position */
            right: 30%; /* Initial position off the screen */
            /* Animation duration and timing function */
            transform:  rotate(180deg);
        }
        #car6 {
          display: none;
            position: absolute;
            bottom: 40%; /* Adjust the vertical position */
            right: 30%; /* Initial position off the screen */
            /* Animation duration and timing function */
            transform:  rotate(180deg);
        }
        form {
  position: absolute;
  font-size: 100%;
  left: 80%; /* Adjust the distance from the right edge */
  top: 10%; /* Center vertically */
 
}

    
    </style>
</head>
<body>
    <div id="image-container">
        <img id="full-screen-image" src="https://i.ibb.co/WkYSK7T/dfaroad.png" alt="dfaroad">
        
      
        <div id="car1" >
            <img class="car1" src="http://www.clker.com/cliparts/l/H/d/6/d/G/blue-car-top-view-hi.png"width="180" height="100">
        </div>
        <div id="car2">
            <img class="car1" src="http://www.clker.com/cliparts/l/H/d/6/d/G/blue-car-top-view-hi.png"width="180" height="100">
        </div>
   -    <div id="car3">
            <img class="car1" src="http://www.clker.com/cliparts/l/H/d/6/d/G/blue-car-top-view-hi.png"width="180" height="100">
        </div>
        <div id="car4" >
            <img class="car1" src="http://www.clker.com/cliparts/l/H/d/6/d/G/blue-car-top-view-hi.png"width="180" height="100">
        </div>
        <div id="car5">
            <img class="car1" src="http://www.clker.com/cliparts/l/H/d/6/d/G/blue-car-top-view-hi.png"width="180" height="100">
        </div>
        <div id="car6">
            <img class="car1" src="http://www.clker.com/cliparts/l/H/d/6/d/G/blue-car-top-view-hi.png" width="180" height="100">
        </div>

        <div class="trafficLight1">
            <span id="redLight1" class="red"></span>
            <span id="yellowLight1" class="yellow"></span>
            <span id="greenLight1" class="green"></span>
        </div>
        <div class="trafficLight2">
            <span id="redLight2" class="red"></span>
            <span id="yellowLight2" class="yellow"></span>
            <span id="greenLight2" class="green"></span>
        </div>
        <div class="trafficLight3">
            <span id="redLight3" class="red"></span>
            <span id="yellowLight3" class="yellow"></span>
            <span id="greenLight3" class="green"></span>
        </div>
        <div class="trafficLight4">
            <span id="redLight4" class="red"></span>
            <span id="yellowLight4" class="yellow"></span>
            <span id="greenLight4" class="green"></span>
        </div>
        <div class="trafficLight5">
            <span id="redLight5" class="red"></span>
            <span id="yellowLight5" class="yellow"></span>
            <span id="greenLight5" class="green"></span>
        </div>
        <div class="trafficLight6">
            <span id="redLight6" class="red"></span>
            <span id="yellowLight6" class="yellow"></span>
            <span id="greenLight6" class="green"></span>
        </div>
        <form id="car-form">
          <h1>Chose your lanes</h1>
          <input type="checkbox" id="lane1" name="lanes" value="lane1">
          <label for="lane1">Lane 1</label><br>
        
          <input type="checkbox" id="lane2" name="lanes" value="lane2">
          <label for="lane2">Lane 2</label><br>
        
          <input type="checkbox" id="lane3" name="lanes" value="lane3">
          <label for="lane3">Lane 3</label><br>
        
          <input type="checkbox" id="lane4" name="lanes" value="lane4">
          <label for="lane4">Lane 4</label><br>
        
          <input type="checkbox" id="lane5" name="lanes" value="lane5">
          <label for="lane5">Lane 5</label><br>
        
          <input type="checkbox" id="lane6" name="lanes" value="lane6">
          <label for="lane6">Lane 6</label><br>
          <input type="submit" value="Submit">
        </form>
       
        
    </div>
  
    <script>
      const carForm = document.getElementById("car-form");
carForm.addEventListener("submit", function(event) {
    event.preventDefault(); // Prevent the form from submitting

    // Loop through the checkboxes and cars
    for (let i = 1; i <= 6; i++) {
        const showCarCheckbox = document.getElementById(`lane${i}`);
        const car = document.getElementById(`car${i}`);
        
        // Check the state of each checkbox and show/hide the corresponding car
        car.style.display = showCarCheckbox.checked ? "block" : "none";
    }
});

      // Define traffic light states and durations
const trafficLightStates = ["red", "yellow", "green"];
const durations = [5000, 1000, 4000]; // Durations for red, yellow, and green in milliseconds

// Define the traffic light configurations
const trafficLights = [
  {
    red: document.getElementById("redLight1"),
    yellow: document.getElementById("yellowLight1"),
    green: document.getElementById("greenLight1"),
  },
  {
    red: document.getElementById("redLight2"),
    yellow: document.getElementById("yellowLight2"),
    green: document.getElementById("greenLight2"),
  },
  {
    red: document.getElementById("redLight3"),
    yellow: document.getElementById("yellowLight3"),
    green: document.getElementById("greenLight3"),
  },
  {
    red: document.getElementById("redLight4"),
    yellow: document.getElementById("yellowLight4"),
    green: document.getElementById("greenLight4"),
  },
  {
    red: document.getElementById("redLight5"),
    yellow: document.getElementById("yellowLight5"),
    green: document.getElementById("greenLight5"),
  },
  {
    red: document.getElementById("redLight6"),
    yellow: document.getElementById("yellowLight6"),
    green: document.getElementById("greenLight6"),
  },
];

// Initialize traffic light states and timers with different starting indices
const trafficLightStatesIndexes = [2, 2, 1, 0, 1, 2];// Example: Starts at red for the first light, yellow for the second, and green for the third
const trafficLightTimers = new Array(trafficLights.length);

// Function to update traffic light state
function updateTrafficLight(index) {
  const stateIndex = trafficLightStatesIndexes[index];
  const nextStateIndex = (stateIndex + 1) % trafficLightStates.length;
  const currentState = trafficLightStates[stateIndex];
  const nextState = trafficLightStates[nextStateIndex];

  // Reset all lights to gray
  for (const key of Object.keys(trafficLights[index])) {
    trafficLights[index][key].style.backgroundColor = "gray";
  }

  // Set the next state
  trafficLights[index][nextState].style.backgroundColor = nextState;

  // Update the state index
  trafficLightStatesIndexes[index] = nextStateIndex;

  // Schedule the next update
  trafficLightTimers[index] = setTimeout(() => {
    updateTrafficLight(index);
  }, durations[nextStateIndex]);
}

// Initialize and start the traffic light cycles
for (let i = 0; i < trafficLights.length; i++) {
  updateTrafficLight(i);
}


const car1 = document.getElementById("car1");
const car2 = document.getElementById("car2");
const car3 = document.getElementById("car3");

const car4 = document.getElementById("car4");
const car5 = document.getElementById("car5");
const car6 = document.getElementById("car6");



// Function to check if trafficlight1 is green
function isTrafficLight1Green() {
  const greenLight1 = document.getElementById("greenLight1");
  return getComputedStyle(greenLight1).backgroundColor === "rgb(0, 128, 0)";
}

function isTrafficLight2Green() {
  const greenLight2 = document.getElementById("greenLight2");
  return getComputedStyle(greenLight2).backgroundColor === "rgb(0, 128, 0)";
}
function isTrafficLight3Green() {
  const greenLight3 = document.getElementById("greenLight3");
  return getComputedStyle(greenLight3).backgroundColor === "rgb(0, 128, 0)";
}

function isTrafficLight4Green() {
  const greenLight4 = document.getElementById("greenLight4");
  return getComputedStyle(greenLight4).backgroundColor === "rgb(0, 128, 0)";
}
function isTrafficLight5Green() {
  const greenLight5 = document.getElementById("greenLight5");
  return getComputedStyle(greenLight5).backgroundColor === "rgb(0, 128, 0)";
}
function isTrafficLight6Green() {
  const greenLight6 = document.getElementById("greenLight6");
  return getComputedStyle(greenLight6).backgroundColor === "rgb(0, 128, 0)";
}
function moveCar1() {
  let currentPosition = 10; // Start at the bottom of the screen
  car1.style.marginBottom = currentPosition + "px";

  function animateCar() {
    // Check if trafficlight1 is green before moving the car
    if (isTrafficLight1Green() || currentPosition >= 150 || currentPosition <= 100) {
      currentPosition += 20; // Move the car up
      car1.style.marginBottom = currentPosition + "px";

      if (currentPosition >= 3000) {
        currentPosition = 10; // Stop the animation when the car reaches the top
        car1.style.marginBottom = currentPosition + "px";
      }
    }

    requestAnimationFrame(animateCar); // Continue the animation
  }

  animateCar(); // Start the animation
}
function moveCar2() {
  let currentPosition = 10; // Start at the bottom of the screen
  car2.style.marginBottom = currentPosition + "px";
  car2.style.marginLeft = "0"; // Initial horizontal position

  const screenHeight = window.innerHeight; // Get the screen height

  let rotationAngle = -90;
  function animateCar() {
    // Check if trafficlight1 is green before moving the car
    if (isTrafficLight2Green() || currentPosition >= 150 || currentPosition <= 100) {
      currentPosition += 20; // Move the car up (responsive to screen size)
      car2.style.marginBottom = currentPosition + "px";

      if (currentPosition >= 0.75 * screenHeight) {
        currentPosition = 10; // Stop the animation when the car reaches the top
      } else if (currentPosition >= 0.54 * screenHeight) {
        // Adjust the rotation angle
        car2.style.transform = `rotate(${0}deg)`;
        currentPosition = 0.54 * screenHeight;
        let currentLeft = parseFloat(car2.style.marginLeft || "0");
        currentLeft +=20; // Move the car to the right (responsive to screen size)
        car2.style.marginLeft = currentLeft + "px";
        if (currentLeft >= 0.725 * screenHeight) {
          currentPosition = 10;
          car2.style.marginLeft = "0"; 
          car2.style.marginBottom = currentPosition + "px";
          car2.style.transform = `rotate(${-90}deg)`;
        }
      }
    }

    requestAnimationFrame(animateCar); // Continue the animation
  }

  animateCar(); // Start the animation
}
function moveCar3() {
  let currentPosition = 10; // Start at the bottom of the screen
  car3.style.marginTop= currentPosition + "px";

  function animateCar() {
    // Check if trafficlight1 is green before moving the car
    if (isTrafficLight3Green() || currentPosition >= 80 || currentPosition <= 3) {
      currentPosition += 20; // Move the car up
      car3.style.marginTop = currentPosition + "px";

      if (currentPosition >= 2500) {
        currentPosition = 10; // Stop the animation when the car reaches the top
        car3.style.marginTop = currentPosition + "px";
       

      }
    }

    requestAnimationFrame(animateCar); // Continue the animation
  }

  animateCar(); // Start the animation
}
function moveCar4() {
  let currentPosition = 1; // Start at the bottom of the screen
  car4.style.marginTop= currentPosition + "px";
    
  function animateCar() {
    // Check if trafficlight1 is green before moving the car
    if (isTrafficLight4Green() || currentPosition >= 80 || currentPosition <= 3) {
      currentPosition += 5; // Move the car up
      car4.style.marginTop = currentPosition + "px";

      if (currentPosition >= 150) {
        currentPosition = 150; // Stop the animation when the car reaches the top
        
        car4.style.transform= `rotate(${0}deg)`;
        let currentLeft = parseFloat(car4.style.marginLeft || "0");
        currentLeft +=5;
        car4.style.marginLeft = currentLeft + "px";
        if(currentLeft >= 800){
            currentLeft = 0;
            currentPosition = 0;
            car4.style.marginTop = currentPosition + "px";
            car4.style.marginLeft = currentLeft + "px";
            car4.style.transform= `rotate(${90}deg)`;
        }
      }
      

    }

    requestAnimationFrame(animateCar); // Continue the animation
  }

  animateCar(); // Start the animation
}

function moveCar5() {
  let currentPosition = 10; // Start at the bottom of the screen
  car5.style.marginRight= currentPosition + "px";
  let currenttop = 0;
  function animateCar() {
    // Check if trafficlight1 is green before moving the car
    if (isTrafficLight5Green() || currentPosition>=300 || currentPosition <=200 ) {
      currentPosition += 5; // Move the car up
      car5.style.marginRight = currentPosition + "px";

      if (currentPosition >= 300) {
        currentPosition = 300; // Stop the animation when the car reaches the top
        car5.style.transform =`rotate(${90}deg)`;
      
        currenttop-=5;
        car5.style.marginBottom = currenttop + "px";
        if (currenttop <= -300){
          car5.style.transform =`rotate(${180}deg)`;

          currentPosition = 10;
          car5.style.marginRight= currentPosition + "px";
          currenttop = 0;
          car5.style.marginBottom = currenttop + "px";
        }
      }
      

    }

    requestAnimationFrame(animateCar); // Continue the animation
  }

  animateCar(); // Start the animation
}

function moveCar6() {
  let currentPosition = 10; // Start at the bottom of the screen
  car6.style.marginRight= currentPosition + "px";
  let currenttop = 0;
  function animateCar() {
    // Check if trafficlight1 is green before moving the car
    if (isTrafficLight6Green() || currentPosition>=300 || currentPosition <=200 ) {
      currentPosition += 20; // Move the car up
      car6.style.marginRight = currentPosition + "px";

      if (currentPosition >= 800) {
        currentPosition = 800; // Stop the animation when the car reaches the top
        car6.style.transform =`rotate(${-90}deg)`;
      
        currenttop+=20;
        car6.style.marginBottom = currenttop + "px";
        if (currenttop >= 3000){
          car6.style.transform =`rotate(${180}deg)`;

          currentPosition = 10;
          car6.style.marginRight= currentPosition + "px";
          currenttop = 0;
          car6.style.marginBottom = currenttop + "px";
        }
      }
      

    }

    requestAnimationFrame(animateCar); // Continue the animation
  }

  animateCar(); // Start the animation
}
// Start the car movement
moveCar1();
moveCar2();
moveCar3();
moveCar4();     
moveCar5(); 
moveCar6();
    </script>
</body>
</html>
